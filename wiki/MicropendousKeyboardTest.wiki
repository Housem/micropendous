#summary Test Pin Connectivity and Functionality of Micropendous Boards

The latest version of this firmware is available in the latest [http://code.google.com/p/micropendous/downloads/list Micropendous Distribution] or via [http://code.google.com/p/micropendous/source/checkout SVN] in the `/Micropendous/Firmware/ MicropendousKeyboardTest` directory.

*Purpose:* Test pin connectivity or use as a keyboard that sends custom test depending on which pin is GND'ed.

*Targets:* [Micropendous1], [Micropendous2], [Micropendous3], [Micropendous4] or any USB AVR based hardware

*USB Mode:* Device-mode enumerating as HID (Human Interface Device) Keyboard

*Status:* Working


== Usage ==

Compile and load the [MicropendousKeyboardTest] firmware onto your USB AVR by following the [ProgramAndTest] tutorial.

== Firmware Design ==

Copied from the [http://www.fourwalledcubicle.com/LUFA.php LUFA] project's Keyboard demo with code to test which pin is currently being GND'ed and send its name.

Some setup code in `main()` to make all relevant pins input pins:
{{{
  DDRD = 0;
  PORTD = 0xFF; //input
}}}

Then a mass of code in `CreateKeyboardReport()` to test which pin is GND'ed:
{{{
} else if (~PINB & (1 << PINB1)) {
  ReportData->KeyCode[0] = 0x05; //b
  ReportData->KeyCode[1] = 0x1E; //1
}}}

The `ReportData->KeyCode[1]` array can store up to 6 characters.  However, most Operating Systems ignore rapidly typed characters so each adjacent character in the array must be different.